<!-- Tambahkan popup sama seperti index -->
<div id="customPopup" class="popup hidden">
  <div class="popup-box">
    <p id="popupMessage"></p>
    <div class="popup-actions" id="popupActions"></div>
  </div>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-app.js";
import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-firestore.js";

const firebaseConfig={/* configmu */};
const app=initializeApp(firebaseConfig);
const db=getFirestore(app);

function showPopup(msg){const p=document.getElementById("customPopup");document.getElementById("popupMessage").textContent=msg;document.getElementById("popupActions").innerHTML='<button onclick="document.getElementById(`customPopup`).classList.add(`hidden`)">OK</button>';p.classList.remove("hidden");}

async function loadDetail(){
  const id=new URLSearchParams(window.location.search).get("id");
  if(!id){showPopup("❌ Tidak ada ID berita.");return;}
  try{
    const snap=await getDoc(doc(db,"posts",id));
    if(!snap.exists()){showPopup("❌ Berita tidak ditemukan.");return;}
    const d=snap.data();
    document.getElementById("detailContainer").innerHTML=`
      <div class="card">
        ${d.imageUrl?`<img src="${d.imageUrl}" class="detail-img" onclick="showLightbox(this.src)">`:""}
        <h2>${d.title}</h2>
        <div class="date">${d.createdAt?.toDate().toLocaleDateString("id-ID")||""}</div>
        <p>${d.content.replace(/\n/g,"<br>")}</p>
      </div>`;
  }catch(err){showPopup("Gagal memuat detail: "+err.message);}
}
loadDetail();
</script>
